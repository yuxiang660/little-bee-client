{"componentChunkName":"component---src-templates-post-tsx","path":"/posts/4/2020-02-10---Little-Bee-Server-Intro/","result":{"data":{"markdownRemark":{"id":"5427acea-b830-5495-b2f1-c78d2c79d8ab","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 568px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/little-bee-client/static/89bc1047421e246ec055767063dfeb56/10e91/little-bee-server-logo.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.77464788732395%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAABYlAAAWJQFJUiTwAAABs0lEQVQoz2P4DwP//v37Twz49xdI/Hg9/8vThQxA1revX96/fw/U/OXzp+/fvyEb8g8MgIyfP3++ePL4y+tnr5+/vnHr1rvbofdPhIA037r74sGjF0+fPHnx6uPVa7d//fqJYhNY84d37zbs2rfgxK1NF68+PZ/1/oLuyY3eDF++/r1yIOf0evvykrSTO8vfPr+IbOG7d+8/fPgIMuPPj9DlpzmnXczfvmzO0ZaGbbW966czvHzz9c4e8ytr+Dk4eNXEGaY3av3/9xXs8H9fv37bunPv/kPHvn0HuaVk21WGjlN8vbuFJx1maD7qNvs4yNkfP3368/vb4cNHyiuqDu1b9+Xze4i3r12/NW32wrkLV9x98AjInbHnjFLnjqr1JyL7VkQtOxkwdz/Dnz9//v79+/sP1J1A4ufPX0ARCPfWnXsPHj6GeP76vYeKHdtSZ65Lq6xTmnM5d8VhBqC6169f37x58/qNG0Dyzp3bnz9/BgoCVUOMAAIo98sHm66NDNV7BbqOMFQfnrz7DDiqvn17BwyZ9+/fvHnz8uVLrBEOETx7486k/Zd7D1xfcuzq2/cfAceDxyZ5X2GbAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/little-bee-client/static/89bc1047421e246ec055767063dfeb56/ba381/little-bee-server-logo.webp 200w,\n/little-bee-client/static/89bc1047421e246ec055767063dfeb56/7f61c/little-bee-server-logo.webp 400w,\n/little-bee-client/static/89bc1047421e246ec055767063dfeb56/bebff/little-bee-server-logo.webp 568w\"\n          sizes=\"(max-width: 568px) 100vw, 568px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/little-bee-client/static/89bc1047421e246ec055767063dfeb56/772e8/little-bee-server-logo.png 200w,\n/little-bee-client/static/89bc1047421e246ec055767063dfeb56/e17e5/little-bee-server-logo.png 400w,\n/little-bee-client/static/89bc1047421e246ec055767063dfeb56/10e91/little-bee-server-logo.png 568w\"\n          sizes=\"(max-width: 568px) 100vw, 568px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/little-bee-client/static/89bc1047421e246ec055767063dfeb56/10e91/little-bee-server-logo.png\"\n          alt=\"little-bee-server-logo\"\n          title=\"little-bee-server-logo\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<h1 id=\"why\" style=\"position:relative;\"><a href=\"#why\" aria-label=\"why permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why</h1>\n<p>为了让大家了解“蜂工厂”项目，这篇博文详细介绍了“蜂工厂”项目的工作原理。</p>\n<h2 id=\"蜂工厂的目的什么？\" style=\"position:relative;\"><a href=\"#%E8%9C%82%E5%B7%A5%E5%8E%82%E7%9A%84%E7%9B%AE%E7%9A%84%E4%BB%80%E4%B9%88%EF%BC%9F\" aria-label=\"蜂工厂的目的什么？ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>“蜂工厂”的目的什么？</h2>\n<p>“蜂工厂”为<a href=\"/little-bee-client/pages/2/about/\">“蜂乐园”平台</a>提供服务，包括：处理并存储“蜂乐园”用户、数据等。</p>\n<h2 id=\"蜂工厂为什么选择gin框架？\" style=\"position:relative;\"><a href=\"#%E8%9C%82%E5%B7%A5%E5%8E%82%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E6%8B%A9gin%E6%A1%86%E6%9E%B6%EF%BC%9F\" aria-label=\"蜂工厂为什么选择gin框架？ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>“蜂工厂”为什么选择\"Gin\"框架？</h2>\n<p>回答这个问题前，需先回答：<strong>为什么选择\"Go\"搭建服务器？</strong>。<a href=\"https://golang.org/\"><code class=\"language-text\">Golang</code></a>作为21世纪的语言，自从诞生以来，就争论不断。这里不展开对比讨论，只列举<code class=\"language-text\">Golang</code>的优势：</p>\n<ul>\n<li>高效，因其可直接编译成机器码，在效率方面可媲美C/C++。</li>\n<li>动静结合，其是静态类型语言但又有动态语言的感觉。即降低了代码维护的成本，又提供了高效的编程体验。</li>\n<li>语言层面的并发支持，<code class=\"language-text\">goroutine</code>的天生并发，可以用简洁的代码实现并发编程。</li>\n</ul>\n<p>比较流行的，<code class=\"language-text\">Go</code>的HTTP服务框架有：<a href=\"https://beego.me/\">\"Beego\"</a>和<a href=\"https://gin-gonic.com/docs/\">\"Gin\"</a>。\"Beego\"以<strong>全</strong>见长，而\"Gin\"以<strong>快</strong>见长。</p>\n<ul>\n<li>\"Beego\"框架除了基础了<code class=\"language-text\">HTTP</code>模块外，还支持<code class=\"language-text\">logs</code>、<code class=\"language-text\">orm</code>等<a href=\"https://beego.me/docs/intro/#beego-%E7%9A%84%E6%9E%B6%E6%9E%84\">模块</a>。而\"Gin\"框架只是一个<a href=\"https://gin-gonic.com/docs/introduction/\">\"HTTP\"库</a>，其他功能需要结合<code class=\"language-text\">Go</code>社区的其他库资源。这也使\"Gin\"框架的开放性更高，可以利用更多优秀的其他资源，如<code class=\"language-text\">orm</code>就可以采用<a href=\"https://gorm.io/docs/\">\"GORM\"</a>实现。</li>\n<li>\"Gin\"框架以性能见长，这是官网的<a href=\"https://gin-gonic.com/docs/benchmarks/\">Benchmarks</a>，数据还是很可观的。要知道，<code class=\"language-text\">Go</code>的官方<code class=\"language-text\">http</code>库已经很友好了，如果HTTP服务框架拖累了性能，就得不偿失了。</li>\n</ul>\n<h1 id=\"what\" style=\"position:relative;\"><a href=\"#what\" aria-label=\"what permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What</h1>\n<h2 id=\"蜂工厂是什么项目？\" style=\"position:relative;\"><a href=\"#%E8%9C%82%E5%B7%A5%E5%8E%82%E6%98%AF%E4%BB%80%E4%B9%88%E9%A1%B9%E7%9B%AE%EF%BC%9F\" aria-label=\"蜂工厂是什么项目？ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>“蜂工厂”是什么项目？</h2>\n<p>“蜂工厂”是“蜂乐园”项目中的基于<code class=\"language-text\">Gin</code>框架的<code class=\"language-text\">REST</code>风格服务器，是“蜂乐园”的大脑，用于处理并存储“蜂乐园”用户、数据等。之所以叫“蜂工厂”，是因为它能接收数据，处理并<strong>厂出</strong>新数据。当前“蜂工厂”<code class=\"language-text\">REST</code>风格的框架已经搭建完成，包括：利用中间件进行权限检测，数据库操作等。但是，<code class=\"language-text\">REST API</code>还在开发中，希望以后其可以有更多强大的<code class=\"language-text\">API</code>供用户使用。</p>\n<h2 id=\"蜂工厂是如何工作的？\" style=\"position:relative;\"><a href=\"#%E8%9C%82%E5%B7%A5%E5%8E%82%E6%98%AF%E5%A6%82%E4%BD%95%E5%B7%A5%E4%BD%9C%E7%9A%84%EF%BC%9F\" aria-label=\"蜂工厂是如何工作的？ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>“蜂工厂”是如何工作的？</h2>\n<p>由于“蜂工厂”是一个后台服务器，并没有友好的<code class=\"language-text\">UI</code>界面，因此这里用<code class=\"language-text\">Postman</code>结合<a href=\"https://yuxiang660.github.io/little-bee-server/\">\"swagger API 文档\"</a>，以操作<code class=\"language-text\">URL: /api/v1/pub/login</code>做演示。</p>\n<ul>\n<li><a href=\"https://github.com/yuxiang660/little-bee-server\">项目展示</a>\n<img src=\"/little-bee-client/asserts/a9ae76571a697e66e20d66e6a940ed82/little-bee-server-demo.gif\" alt=\"little-bee-server-demo\"></li>\n</ul>\n<h2 id=\"蜂工厂是如何实现的？\" style=\"position:relative;\"><a href=\"#%E8%9C%82%E5%B7%A5%E5%8E%82%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84%EF%BC%9F\" aria-label=\"蜂工厂是如何实现的？ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>“蜂工厂”是如何实现的？</h2>\n<p>“蜂工厂”是一个基于<a href=\"https://gin-gonic.com/\">\"Gin\"</a>框架的后台服务器。下面罗列了部分“蜂工厂”涉及的技术。如果您对以项某项内容感兴趣，那么您可以继续往下看。在“How”部分，我们将详细介绍“蜂工厂”是如何实现的。</p>\n<ul>\n<li><a href=\"https://golang.org/\"><code class=\"language-text\">Go</code></a></li>\n<li><a href=\"https://gin-gonic.com/\"><code class=\"language-text\">Gin</code></a></li>\n<li><a href=\"https://gorm.io/\"><code class=\"language-text\">GORM</code></a></li>\n<li><a href=\"https://github.com/dgrijalva/jwt-go\"><code class=\"language-text\">JWT-GO</code></a></li>\n<li><a href=\"https://github.com/go-redis/redis\"><code class=\"language-text\">GO-Redis</code></a></li>\n<li><a href=\"https://github.com/uber-go/dig\"><code class=\"language-text\">Go-Dig</code></a></li>\n<li><a href=\"https://github.com/sirupsen/logrus\"><code class=\"language-text\">logrus</code></a></li>\n</ul>\n<h1 id=\"how\" style=\"position:relative;\"><a href=\"#how\" aria-label=\"how permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How</h1>\n<h2 id=\"蜂工厂项目结构\" style=\"position:relative;\"><a href=\"#%E8%9C%82%E5%B7%A5%E5%8E%82%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84\" aria-label=\"蜂工厂项目结构 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>“蜂工厂”项目结构</h2>\n<ul>\n<li><a href=\"https://github.com/yuxiang660/little-bee-server\">“蜂工厂”</a>在<code class=\"language-text\">GitHub</code>上的文件组织遵循<a href=\"https://github.com/golang-standards/project-layout\">golang-standards/project-layout</a>规则，结构如下：</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-go line-numbers\"><code class=\"language-go\"><span class=\"token punctuation\">.</span>\n├── Makefile               <span class=\"token comment\">// 用Makefile管理项目的编译</span>\n├── README<span class=\"token punctuation\">.</span>md              <span class=\"token comment\">// 解释文档</span>\n├── cmd                    <span class=\"token comment\">// 程序入口文件夹</span>\n<span class=\"token operator\">|</span>   └── server             <span class=\"token comment\">// 主程序文件夹</span>\n<span class=\"token operator\">|</span>       └── main<span class=\"token punctuation\">.</span><span class=\"token keyword\">go</span>        <span class=\"token comment\">// 主程序，每一个Go项目有且只有一个main入口</span>\n├── configs                <span class=\"token comment\">// 用户配置文件夹</span>\n<span class=\"token operator\">|</span>   └── config<span class=\"token punctuation\">.</span>toml        <span class=\"token comment\">// 存储对服务器的所有配置</span>\n├── docs                   <span class=\"token comment\">// 存储服务器的Swagger API文档</span>\n├── export                 <span class=\"token comment\">// 存储服务器输出文件，包括数据信息、log信息等</span>\n├── <span class=\"token keyword\">go</span><span class=\"token punctuation\">.</span>mod                 <span class=\"token comment\">// Go项目包管理文件</span>\n├── <span class=\"token keyword\">go</span><span class=\"token punctuation\">.</span>sum                 <span class=\"token comment\">// Go项目包管理文件</span>\n└── internal               <span class=\"token comment\">// 项目内部源文件(其他项目无法直接调用)</span>\n    └── app                <span class=\"token comment\">// 内部源文件主目录</span>\n        ├── app<span class=\"token punctuation\">.</span><span class=\"token keyword\">go</span>         <span class=\"token comment\">// 内部源文件初始化入口</span>\n        ├── auther         <span class=\"token comment\">// 身份认证模块</span>\n        ├── auther<span class=\"token punctuation\">.</span><span class=\"token keyword\">go</span>      <span class=\"token comment\">// 身份认证模块初始化入口</span>\n        ├── config         <span class=\"token comment\">// 用户配置文件解析模块</span>\n        ├── controller     <span class=\"token comment\">// 控制器模块，用于处理业务逻辑</span>\n        ├── controller<span class=\"token punctuation\">.</span><span class=\"token keyword\">go</span>  <span class=\"token comment\">// 控制器模块初始化入口</span>\n        ├── errors         <span class=\"token comment\">// 服务器错误模块，定义错误信息</span>\n        ├── ginhelper      <span class=\"token comment\">// gin框架utilities</span>\n        ├── logger         <span class=\"token comment\">// 日志模块</span>\n        ├── logger<span class=\"token punctuation\">.</span><span class=\"token keyword\">go</span>      <span class=\"token comment\">// 日志模块初始化入口</span>\n        ├── model          <span class=\"token comment\">// Model模块，提供接口给控制器存储数据</span>\n        ├── model<span class=\"token punctuation\">.</span><span class=\"token keyword\">go</span>       <span class=\"token comment\">// Model模块初始化入口</span>\n        ├── routers        <span class=\"token comment\">// 路由模块</span>\n        <span class=\"token operator\">|</span>   ├── api        <span class=\"token comment\">// REST API</span>\n        <span class=\"token operator\">|</span>   ├── middleware <span class=\"token comment\">// 中间件</span>\n        <span class=\"token operator\">|</span>   ├── routers<span class=\"token punctuation\">.</span><span class=\"token keyword\">go</span> <span class=\"token comment\">// 初始化REST API和中间件</span>\n        <span class=\"token operator\">|</span>   └── swagger<span class=\"token punctuation\">.</span><span class=\"token keyword\">go</span> <span class=\"token comment\">// API 文档入口</span>\n        ├── routers<span class=\"token punctuation\">.</span><span class=\"token keyword\">go</span>     <span class=\"token comment\">// 路由初始化入口，并开启HTTP服务</span>\n        ├── store          <span class=\"token comment\">// 数据库模块，提供接口给Model模块和数据库打交道</span>\n        └── store<span class=\"token punctuation\">.</span><span class=\"token keyword\">go</span>       <span class=\"token comment\">// 数据模块初始化入口</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"蜂工厂架构\" style=\"position:relative;\"><a href=\"#%E8%9C%82%E5%B7%A5%E5%8E%82%E6%9E%B6%E6%9E%84\" aria-label=\"蜂工厂架构 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>“蜂工厂”架构</h2>\n<ul>\n<li>“蜂工厂”启动和工作流程图\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/little-bee-client/static/298047bc686a3868a0098c2ea8e33d7e/62b00/little-bee-server-architecture.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 130.0221565731167%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAIAAAA44esqAAAACXBIWXMAAFxGAABcRgEUlENBAAADqElEQVQ4y4VU+2/TVhTOv7j+wKb9toc2aZrQHt2K0MYGGqwaIDZBWXlMER0ttEno0jaFAKVARxtK27RJWNPEeTqOX40T23EcP7PPdpo1oRpHx1e+99zvfOece+71dQ7EsOwdUpZUE/92p09My2oI9Y49sNzx4bPc1VhePPVXPrjBOeBD2zi+srRDh9YISZRck90HNi1nPvOKvRAtXX5S6Sewi8RG4FFkNRaUBf4IsDdTNDOS2K8I7QFmiCCyuiZ03hCf3DarjbbhkpumYbuu4N5y1V005Zahm9117PQUVh8I64qxL+vQDNOsNrRaU1d1yzRt3bA9E8E2mYYmKIZmWoeqaPt0lNLunJkrfD2dPRHKfTeb+3QiHS/LMKPy3waI4QAxEsoNzxCfTKTzfGurKE29ZAIbLC/rDhjRzW3zUzHG/zc19ZKeWKXLNSdzZPT55N7Ht3a/CWS/nM68f/01wbYWtvlLj8q/PibJmuozTAuxnIuUsON0OH96rnD8TiZZaTpg1QTbB/5/vprOfnZ779h4Mse1yjX1abr+gmiIquGAZdXIcyqyzTAKKbTphgZOgJH5z4vFkyEC46lwfiREwDqzzgwHsiPBLMG1fCg04r7+jBoJEmfmCz8tFL64k1nLiQDDFI7zoU3u3hY3G+furjM1WfcO1TCdk3DAyDqaqt18TiHbP9doONpjFGxq6db5aPn8g9Klh+WL0dKP4TzpdoFmdGvuwx8O7fISeSJEnF0onosUkeFmSfKYZ7f4u+ts4BWUQ5F5l1nzuqIHXtjZ/2OFmlijb8foGytUlu0ywylq+9tj8soTEplXDpj7wL8vV76fzYMWirONu8wo2PhT6uLD8rVnFPAXomUU9QgwSoJ9N1eq/hfVseVK2s0ZYU/GaKxgRC1uPKc46Y2w0Se3Vqu/PCiNLhYR5NlIIU52ma8skYgFtw0jwkaHOU71g4LpTpPYy+k60l5M7N9P1sLbPK6Kx4xzml5n57f54CY3GWPQVd6z0QUbbm+P3i/9EC7A/egiWo1IuB0GQcPM7/CoJQr+mmoO3FaH2fvTdZ3iBVGWe5cGI9iGriY+9O8eG0+dvJcbeKG6YLDzdZFvGryoyE2lB8bhDV1NfuTffe9aCi14NBhSEyWmoXB1WVHbPTBSfWcs+e54amgsgTszGLbXnngnNN0QpCagztRV9Dyuzi6t4FVNUTIraVjpWZ3H4PAEZND+lf+I7H6TA+68TTyPln2E6e3g/5F/AUQPe1z77FYXAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/little-bee-client/static/298047bc686a3868a0098c2ea8e33d7e/ba381/little-bee-server-architecture.webp 200w,\n/little-bee-client/static/298047bc686a3868a0098c2ea8e33d7e/7f61c/little-bee-server-architecture.webp 400w,\n/little-bee-client/static/298047bc686a3868a0098c2ea8e33d7e/d00b9/little-bee-server-architecture.webp 800w,\n/little-bee-client/static/298047bc686a3868a0098c2ea8e33d7e/92f8c/little-bee-server-architecture.webp 1200w,\n/little-bee-client/static/298047bc686a3868a0098c2ea8e33d7e/fad48/little-bee-server-architecture.webp 1600w,\n/little-bee-client/static/298047bc686a3868a0098c2ea8e33d7e/1f0ff/little-bee-server-architecture.webp 2708w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/little-bee-client/static/298047bc686a3868a0098c2ea8e33d7e/772e8/little-bee-server-architecture.png 200w,\n/little-bee-client/static/298047bc686a3868a0098c2ea8e33d7e/e17e5/little-bee-server-architecture.png 400w,\n/little-bee-client/static/298047bc686a3868a0098c2ea8e33d7e/5a190/little-bee-server-architecture.png 800w,\n/little-bee-client/static/298047bc686a3868a0098c2ea8e33d7e/c1b63/little-bee-server-architecture.png 1200w,\n/little-bee-client/static/298047bc686a3868a0098c2ea8e33d7e/29007/little-bee-server-architecture.png 1600w,\n/little-bee-client/static/298047bc686a3868a0098c2ea8e33d7e/62b00/little-bee-server-architecture.png 2708w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/little-bee-client/static/298047bc686a3868a0098c2ea8e33d7e/5a190/little-bee-server-architecture.png\"\n          alt=\"little-bee-server-architecture\"\n          title=\"little-bee-server-architecture\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></li>\n<li>\n<p>“蜂工厂”模块</p>\n<ul>\n<li>日志模块Logger<br>\n日志模块是基于<a href=\"https://github.com/sirupsen/logrus\"><code class=\"language-text\">logrus</code></a>库实现的。<br>\n日志模块是一个独立模块，不依赖其他模块，读取用户配置后，即可完成初始化。</li>\n<li>数据库模块Store<br>\n数据库模块依赖了多个第三方库，实现对数据库的操作，包括：<a href=\"https://gorm.io/\"><code class=\"language-text\">GORM</code></a>，<a href=\"https://github.com/go-redis/redis\"><code class=\"language-text\">GO-Redis</code></a>，<a href=\"https://github.com/tidwall/buntdb\">buntdb</a>等。<br>\n数据库模块是底层模块，用<a href=\"https://github.com/yuxiang660/little-bee-server/blob/master/internal/app/store/store.go\">store接口</a>隐藏了底层实现。</li>\n<li>Model模块<br>\nModel模块定义了特定数据类型的特定数据库操作（例如，<code class=\"language-text\">User</code>数据的<code class=\"language-text\">Query</code>操作），是控制器模块和数据库模块的中间层，控制器模块应通过Model模块操作数据，而不应直接操作数据库模块。</li>\n<li>控制器模块Controller<br>\n控制器模块用于处理业务逻辑，接收用户的<code class=\"language-text\">request</code>，返回<code class=\"language-text\">response</code>给用户。</li>\n<li>身份验证模块Auther<br>\n身份验证模块被中间件调用，进行<code class=\"language-text\">JWT</code>身份验证。由于<code class=\"language-text\">JWT</code>口令需要有销毁记录，以保证口令被销毁后，用户无法通过验证。因此，身份验证模块需要依赖“数据库模块”对数据库进行操作。</li>\n<li>中间件模块<br>\n中间件模块实践了日志记录，身份验证，CORS支持，异常恢复等常见功能。</li>\n</ul>\n</li>\n<li>\n<p>“蜂工厂”启动流程</p>\n<ul>\n<li>根据配置文件，配置日志模块</li>\n<li>根据配置文件，利用<a href=\"https://github.com/uber-go/dig\">'Go-Dig'</a>的依赖注入技术初始化各模块</li>\n<li>启动HTTP服务，开启HTTP监听</li>\n</ul>\n</li>\n<li>\n<p>“蜂工厂”工作流程</p>\n<ul>\n<li>用户发起<code class=\"language-text\">REST API</code>请求</li>\n<li>通过对<code class=\"language-text\">URL</code>的解析，经过中间件处理，到达指定控制器模块相应API</li>\n<li>控制器模块调用Model模块进行数据库操作</li>\n<li>Model模块操作数据库模块的API实现数据库操作</li>\n<li>数据库模块根据指令，读取或写入数据从/到数据库</li>\n</ul>\n</li>\n</ul>","fields":{"slug":"/posts/4/2020-02-10---Little-Bee-Server-Intro/","tagSlugs":["/tag/intro/","/tag/little-bee/","/tag/gin/","/tag/go/"],"date":"2020-02-10T00:00:00.000Z"},"frontmatter":{"description":"这是一篇\"Introduction\"文章，介绍“蜂工厂”项目。","tags":["Intro","LittleBee","Gin","Go"],"title":"“蜂工厂”简介"}}},"pageContext":{"slug":"/posts/4/2020-02-10---Little-Bee-Server-Intro/"}}}